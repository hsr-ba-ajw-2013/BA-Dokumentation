\section{Software Layers}
\label{sec:sad-layers}

In diesem Abschnitt werden die verschiedenen Ebenen der Architektur der Beispielapplikation beschrieben.

Um einen grundsätzlichen Einblick zu erhalten wird jede Ebene zuerst komplett unabhängig von jeglicher konkreter Technologie vorgestellt. In einem weiteren Schritt werden die verwendeten Technologien eingeführt und kurz erläutert.

In der Diagrammen stehen durchgezogene Pfeile jeweils für einen synchronen, gestrichelte Pfeile für einen asynchrone Kommunikationsvorgang.


\subsection*{Technologieneutral}

\begin{figure}[H]
	\centering{
		\input{content/sad/diagrams/layers-diagram}
	}

	\caption{Software Layers -- Technologieneutral}
\end{figure}

\subsubsection*{Client-Side}
Diese Schicht wird im Browser selber als JavaScript ausgeführt und synchronisiert sich mit dem Server über eine REST Schnittstelle.

\subsubsection*{Business}
In der Business-Schicht wird die eigentliche Business-Logik definiert und mit der Datenbank über Models kommuniziert.

\subsubsection*{Language Framework}
Das Language Framework repräsentiert die von der jeweiligen konkreten Plattform zur Verfügung gestellten API.

\subsubsection*{Security}
Sowohl Client wie auch Server beinhalten Sicherheitsmassnahmen um zu gewährleisten, dass ein \gls{Benutzer} immer authentisiert ist und keine gefährlichen Daten übermitteln kann.

\subsection*{Konkrete Implementation}

\begin{figure}[H]
	\centering{
		\input{content/sad/diagrams/layers-diagram-impl}
	}

	\caption{Software Layers -- Konkrete Implementation}
\end{figure}

\newpage
\subsubsection*{Client-Side MVC}
Auf der Client-Seite im Browser wird ebenfalls das MVC-Pattern \cite{MVC}verwendet. Dies ermöglicht eine entkoppelte Implementation.

Das Client-Side MVC ist auf Backbone.js \cite{Backbonejs} aufgebaut.

\subsubsection*{Handlebars Views}
Die Präsentations-Schicht verwendet Handlebars \cite{Handlebars}. Die praxiserprobte Library ermöglicht die Erstellung von Templates mit minimaler enthaltener Programmlogik.

\subsubsection*{Winston}
Winston \cite{Winston} ist ein Logging-Framework für \gls{nodejs}. Einer der grössten Vorteile von Winston ist die umfangreiche Konfigurierbarkeit, wie die unterschiedlichen Logs behandelt werden sollen.

\subsubsection*{CSRF}
\gls{CSRF}-Schicht um CSRF-Attacken zu verhindern. Dies wird von Express.js zur Verfügung gestellt \cite{ExpressjsCSRF} und muss lediglich in der entsprechenden Applikation aktiviert werden.

\subsubsection*{Validation}
Formular-Inhalte werden durch ``node-validator'' \cite{nodevalidator} auf vorher definierte Bedingungen überprüft und bereinigt.

\subsubsection*{Passport}
Passport \cite{Passportjs} ist ein Authentisierungs-Framework für \gls{nodejs}. Es bietet eine Vielzahl von Strategien (Strategy-Pattern \cite{StrategyPattern}) für das Einloggen über verschiedenste externe Authentisierungs-Provider (z.B. Facebook Login for Web \cite{facebooklogin}) an.

\subsubsection*{Escaping}
Um SQL-Injection \cite{sqlinjection} Attacken u.Ä. zu unterbinden, bietet das \gls{ORM} Sequelize \cite{Sequelize} umfangreiche Funktionalitäten für das Bereinigen von tendenziell gefährlichen \gls{SQL}-Abfragen an.