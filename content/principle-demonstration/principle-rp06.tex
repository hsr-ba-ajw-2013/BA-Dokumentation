\section{RP6 Should-Formats}
\label{sec:principle-rp6-should-formats}
Wie bereits der Name ROCA sagt, sollen Anwendungen ressourcen-orientiert sein. Damit diese Ressourcen auch in anderen Anwendungen als in einem Browser verwendet werden können, muss entweder das erzeugte HTML maschinenlesbar sein oder es müssen alternative Formate (wie z.B. JSON, XML usw.) verfügbar gemacht werden.

\subsection*{Geplante Umsetzung}
Im Abschnitt \ref{sec:principle-rp1-rest} \nameref{sec:principle-rp1-rest} wird darauf hingewiesen, dass eine REST API mit JSON als Datenformat verwendet werden soll.

\subsection*{Konkrete Umsetzung}
Abschnitt \ref{sec:principle-rp1-rest} \nameref{sec:principle-rp1-rest} zeigt, dass eine API umgesetzt wurde.
Die Schnittstelle liefert JSON als Ausgabeformat. Dies wird garantiert, indem ein Objekt an die Express.js Response \cite{ExpressjsResSend} zurückgeliefert wird und Express.js automatisch JavaScript Objekte in JSON umwandelt \cite{ExpressjsResponseJsonConverter}.

\begin{lstlisting}[language=JavaScript, caption=Community API getCommunityWithSlug \cite{roomiesCommunityApiExample}, label=lst:restApiCommunitySlug, firstnumber=333, escapeinside={@}{@}]
/** Function: getCommunityWithSlug
 * Looks up a community with a specific slug.
 *
 * Parameters:
 *   (Function) success - Callback on success. Will pass the community data as
 *                        first argument.
 *   (Function) error - Callback in case of an error
 *   (String) slug - The slug of the community to look for.
 */
function getCommunityWithSlug(success, error, slug) {
	debug('get community with slug');

	var communityDao = getCommunityDao.call(this);

	communityDao.find({ where: { slug: slug, enabled: true }})
		.success(function findResult(community) {
			if(!_.isNull(community)) {
				success(community.dataValues);
			} else {
				error(new errors.NotFoundError('Community with slug ' + slug +
					'does not exist.'));
			}
		})
		.error(function daoError(err) {
			error(err);
		});
}
\end{lstlisting}

Quelltext \ref{lst:restApiCommunitySlug} zeigt, wie das Community Objekt an den Success-Handler weitergegeben wird. Der Success-Handler ist von ``barefoot'' definiert und reicht den übergebenen Parameter an Express.js weiter. Express.js generiert daraus einen JSON String.

\subsection*{Diskussion}
Diese Richtlinie scheint auf den ersten Blick nicht sonderlich viel zu bringen. Wenn in einer Applikation sowieso nur JSON für API-Calls verwendet wird, wieso sollte dann z.B. zusätzlich XML unterstützt werden?

\nameref{sec:principle-rp6-should-formats} ist aber anders zu verstehen. Es soll zusätzlich zum Generieren von HTML (welches aufgrund von \nameref{sec:principle-rp14-unobtrusive-javascript} ausdrücklich erforderlich ist) ein Ausgabeformat generiert werden, welches von Maschinen einfach lesbar ist (z.B. JSON oder XML).

Um die beiden Richtlinien \nameref{sec:principle-rp5-non-browser} und \nameref{sec:principle-rp14-unobtrusive-javascript} umsetzen zu können, muss auch diese Richtlinie umgesetzt werden. Ob JSON oder XML verwendet wird ist grundsätzlich egal und muss pro Applikation entschieden werden.

Das Projektteam kann diese Richtlinie uneingeschränkt empfehlen.